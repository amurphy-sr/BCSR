!function(t,e){"function"==typeof define&&define.amd?define(["exports"],e):e("undefined"!=typeof exports?exports:t)}(this,function(t){function e(t){return W(t,48,57)}function n(t){return e(t)||W(t,65,70)||W(t,97,102)}function r(t){return W(t,65,90)}function o(t){return W(t,97,122)}function i(t){return r(t)||o(t)}function a(t){return t>=160}function p(t){return i(t)||a(t)||95==t}function u(t){return p(t)||e(t)||45==t}function s(t){return W(t,0,8)||W(t,14,31)||W(t,127,159)}function d(t){return 10==t||12==t}function c(t){return d(t)||9==t||32==t}function f(t){return d(t)||isNaN(t)}function h(t,r){void 0==r&&(r={transformFunctionWhitespace:!1,scientificNotation:!1});for(var o,i,a=-1,h=[],l="data",y=0,D=0,W=0,j=function(){y+=1,W=D,D=0},J={line:y,column:D},K=function(e){return void 0===e&&(e=1),t.charCodeAt(a+e)},z=function(e){return void 0===e&&(e=1),a+=e,o=t.charCodeAt(a),d(o)?j():D+=e,!0},Y=function(){return a-=1,d(o)?(y-=1,D=W):D-=1,J.line=y,J.column=D,!0},Q=function(){return a>=t.length},V=function(){},X=function(t){return t?t.finish():t=i.finish(),r.loc===!0&&(t.loc={},t.loc.start={line:J.line,column:J.column},J={line:y,column:D},t.loc.end=J),h.push(t),i=void 0,!0},Z=function(t){return i=t,!0},$=function(){return console.log("Parse error at index "+a+", processing codepoint 0x"+o.toString(16)+" in state "+l+"."),!0},te=function(t){return console.log("MAJOR SPEC ERROR: "+t),!0},ee=function(t){return l=t,!0},ne=function(){if(z(),n(o)){for(var t=[],e=0;6>e&&n(o);e++)t.push(o),z();if(null!=t.map)var r=parseInt(t.map(String.fromCharCode).join(""),16);else{for(d1=[],_len=t.length,_i=0;_i<_len;_i++)d1.push(String.fromCharCode(t[_i]));var r=parseInt(d1.join(""),16)}return r>B&&(r=65533),c(o)||Y(),r}return o};;){if(a>2*t.length)return"I'm infinite-looping!";switch(z(),l){case"data":if(c(o))for(X(new S);c(K());)z();else if(34==o)ee("double-quote-string");else if(35==o)ee("hash");else if(39==o)ee("single-quote-string");else if(40==o)X(new A);else if(41==o)X(new I);else if(43==o)e(K())||46==K()&&e(K(2))?ee("number")&&Y():X(new U(o));else if(45==o)45==K(1)&&62==K(2)?z(2)&&X(new k):e(K())||46==K(1)&&e(K(2))?ee("number")&&Y():ee("ident")&&Y();else if(46==o)e(K())?ee("number")&&Y():X(new U(o));else if(47==o)42==K()?z()&&ee("comment"):X(new U(o));else if(58==o)X(new m);else if(59==o)X(new b);else if(60==o)33==K(1)&&45==K(2)&&45==K(3)?z(3)&&X(new v):X(new U(o));else if(64==o)ee("at-keyword");else if(91==o)X(new E);else if(92==o)f(K())?$()&&X(new U(o)):ee("ident")&&Y();else if(93==o)X(new N);else if(123==o)X(new C);else if(125==o)X(new T);else if(e(o))ee("number")&&Y();else if(85==o||117==o)43==K(1)&&n(K(2))?z()&&ee("unicode-range"):ee("ident")&&Y();else if(p(o))ee("ident")&&Y();else{if(Q())return X(new R),h;X(new U(o))}break;case"double-quote-string":void 0==i&&Z(new L),34==o?X()&&ee("data"):Q()?$()&&X()&&ee("data")&&Y():d(o)?$()&&X(new w)&&ee("data")&&Y():92==o?f(K())?$()&&X(new w)&&ee("data"):d(K())?z():i.append(ne()):i.append(o);break;case"single-quote-string":void 0==i&&Z(new L),39==o?X()&&ee("data"):Q()?$()&&X()&&ee("data"):d(o)?$()&&X(new w)&&ee("data")&&Y():92==o?f(K())?$()&&X(new w)&&ee("data"):d(K())?z():i.append(ne()):i.append(o);break;case"hash":u(o)?Z(new M(o))&&ee("hash-rest"):92==o?f(K())?$()&&X(new U(35))&&ee("data")&&Y():Z(new M(ne()))&&ee("hash-rest"):X(new U(35))&&ee("data")&&Y();break;case"hash-rest":u(o)?i.append(o):92==o?f(K())?$()&&X()&&ee("data")&&Y():i.append(ne()):X()&&ee("data")&&Y();break;case"comment":42==o?47==K()?z()&&ee("data"):V():Q()?$()&&ee("data")&&Y():V();break;case"at-keyword":45==o?p(K())?Z(new q(45))&&ee("at-keyword-rest"):92!=K(1)||f(K(2))?$()&&X(new U(64))&&ee("data")&&Y():Z(new AtKeywordtoken(45))&&ee("at-keyword-rest"):p(o)?Z(new q(o))&&ee("at-keyword-rest"):92==o?f(K())?$()&&X(new U(35))&&ee("data")&&Y():Z(new q(ne()))&&ee("at-keyword-rest"):X(new U(64))&&ee("data")&&Y();break;case"at-keyword-rest":u(o)?i.append(o):92==o?f(K())?$()&&X()&&ee("data")&&Y():i.append(ne()):X()&&ee("data")&&Y();break;case"ident":45==o?p(K())?Z(new O(o))&&ee("ident-rest"):92!=K(1)||f(K(2))?X(new U(45))&&ee("data"):Z(new O(o))&&ee("ident-rest"):p(o)?Z(new O(o))&&ee("ident-rest"):92==o?f(K())?$()&&ee("data")&&Y():Z(new O(ne()))&&ee("ident-rest"):te("Hit the generic 'else' clause in ident state.")&&ee("data")&&Y();break;case"ident-rest":u(o)?i.append(o):92==o?f(K())?$()&&X()&&ee("data")&&Y():i.append(ne()):40==o?i.ASCIImatch("url")?ee("url"):X(new G(i))&&ee("data"):c(o)&&r.transformFunctionWhitespace?ee("transform-function-whitespace")&&Y():X()&&ee("data")&&Y();break;case"transform-function-whitespace":c(K())?V():40==o?X(new G(i))&&ee("data"):X()&&ee("data")&&Y();break;case"number":Z(new _),45==o?e(K())?z()&&i.append([45,o])&&ee("number-rest"):46==K(1)&&e(K(2))?z(2)&&i.append([45,46,o])&&ee("number-fraction"):ee("data")&&Y():43==o?e(K())?z()&&i.append([43,o])&&ee("number-rest"):46==K(1)&&e(K(2))?z(2)&&i.append([43,46,o])&&ee("number-fraction"):ee("data")&&Y():e(o)?i.append(o)&&ee("number-rest"):46==o&&e(K())?z()&&i.append([46,o])&&ee("number-fraction"):ee("data")&&Y();break;case"number-rest":e(o)?i.append(o):46==o?e(K())?z()&&i.append([46,o])&&ee("number-fraction"):X()&&ee("data")&&Y():37==o?X(new x(i))&&ee("data"):69==o||101==o?e(K())?z()&&i.append([37,o])&&ee("sci-notation"):43!=K(1)&&45!=K(1)||!e(K(2))?Z(new F(i,o))&&ee("dimension"):i.append([37,K(1),K(2)])&&z(2)&&ee("sci-notation"):45==o?p(K())?z()&&Z(new F(i,[45,o]))&&ee("dimension"):92==K(1)&&f(K(2))?$()&&X()&&ee("data")&&Y():92==K(1)?z()&&Z(new F(i,[45,ne()]))&&ee("dimension"):X()&&ee("data")&&Y():p(o)?Z(new F(i,o))&&ee("dimension"):92==o?f(K)?$()&&X()&&ee("data")&&Y():Z(new F(i,ne))&&ee("dimension"):X()&&ee("data")&&Y();break;case"number-fraction":i.type="number",e(o)?i.append(o):37==o?X(new x(i))&&ee("data"):69==o||101==o?e(K())?z()&&i.append([101,o])&&ee("sci-notation"):43!=K(1)&&45!=K(1)||!e(K(2))?Z(new F(i,o))&&ee("dimension"):i.append([101,K(1),K(2)])&&z(2)&&ee("sci-notation"):45==o?p(K())?z()&&Z(new F(i,[45,o]))&&ee("dimension"):92==K(1)&&f(K(2))?$()&&X()&&ee("data")&&Y():92==K(1)?z()&&Z(new F(i,[45,ne()]))&&ee("dimension"):X()&&ee("data")&&Y():p(o)?Z(new F(i,o))&&ee("dimension"):92==o?f(K)?$()&&X()&&ee("data")&&Y():Z(new F(i,ne()))&&ee("dimension"):X()&&ee("data")&&Y();break;case"dimension":u(o)?i.append(o):92==o?f(K())?$()&&X()&&ee("data")&&Y():i.append(ne()):X()&&ee("data")&&Y();break;case"sci-notation":i.type="number",e(o)?i.append(o):X()&&ee("data")&&Y();break;case"url":Q()?$()&&X(new g)&&ee("data"):34==o?ee("url-double-quote"):39==o?ee("url-single-quote"):41==o?X(new H)&&ee("data"):c(o)?V():ee("url-unquoted")&&Y();break;case"url-double-quote":i instanceof H||Z(new H),Q()?$()&&X(new g)&&ee("data"):34==o?ee("url-end"):d(o)?$()&&ee("bad-url"):92==o?d(K())?z():f(K())?$()&&X(new g)&&ee("data")&&Y():i.append(ne()):i.append(o);break;case"url-single-quote":i instanceof H||Z(new H),Q()?$()&&X(new g)&&ee("data"):39==o?ee("url-end"):d(o)?$()&&ee("bad-url"):92==o?d(K())?z():f(K())?$()&&X(new g)&&ee("data")&&Y():i.append(ne()):i.append(o);break;case"url-end":Q()?$()&&X(new g)&&ee("data"):c(o)?V():41==o?X()&&ee("data"):$()&&ee("bad-url")&&Y();break;case"url-unquoted":i instanceof H||Z(new H),Q()?$()&&X(new g)&&ee("data"):c(o)?ee("url-end"):41==o?X()&&ee("data"):34==o||39==o||40==o||s(o)?$()&&ee("bad-url"):92==o?f(K())?$()&&ee("bad-url"):i.append(ne()):i.append(o);break;case"bad-url":Q()?$()&&X(new g)&&ee("data"):41==o?X(new g)&&ee("data"):92==o?f(K())?V():ne():V();break;case"unicode-range":for(var re=[o],oe=[o],ie=1;6>ie&&n(K());ie++)z(),re.push(o),oe.push(o);if(63==K()){for(;6>ie&&63==K();ie++)z(),re.push("0".charCodeAt(0)),oe.push("f".charCodeAt(0));X(new P(re,oe))&&ee("data")}else if(45==K(1)&&n(K(2))){z(),z(),oe=[o];for(var ie=1;6>ie&&n(K());ie++)z(),oe.push(o);X(new P(re,oe))&&ee("data")}else X(new P(re))&&ee("data");break;default:te("Unknown state '"+l+"'")}}}function l(t){return String.fromCharCode.apply(null,t.filter(function(t){return t}))}function y(){return this}function w(){return this}function g(){return this}function S(){return this}function v(){return this}function k(){return this}function m(){return this}function b(){return this}function C(){return this}function T(){return this}function E(){return this}function N(){return this}function A(){return this}function I(){return this}function R(){return this}function U(t){return this.value=String.fromCharCode(t),this}function D(){return this}function O(t){this.value=[],this.append(t)}function G(t){this.value=t.finish().value}function q(t){this.value=[],this.append(t)}function M(t){this.value=[],this.append(t)}function L(t){this.value=[],this.append(t)}function H(t){this.value=[],this.append(t)}function _(t){this.value=[],this.append(t),this.type="integer"}function x(t){t.finish(),this.value=t.value,this.repr=t.repr}function F(t,e){t.finish(),this.num=t.value,this.unit=[],this.repr=t.repr,this.append(e)}function P(t,e){return t=parseInt(l(t),16),e=void 0===e?t+1:parseInt(l(e),16),t>B&&(e=t),t>e&&(e=t),e>B&&(e=B),this.start=t,this.end=e,this}var W=function(t,e,n){return t>=e&&n>=t},B=1114111;y.prototype.finish=function(){return this},y.prototype.toString=function(){return this.tokenType},y.prototype.toSourceString=y.prototype.toString,y.prototype.toJSON=function(){return this.toString()},w.prototype=new y,w.prototype.tokenType="BADSTRING",g.prototype=new y,g.prototype.tokenType="BADURL",S.prototype=new y,S.prototype.tokenType="WHITESPACE",S.prototype.toString=function(){return"WS"},S.prototype.toSourceString=function(){return" "},v.prototype=new y,v.prototype.tokenType="CDO",k.prototype=new y,k.prototype.tokenType="CDC",m.prototype=new y,m.prototype.tokenType=":",b.prototype=new y,b.prototype.tokenType=";",C.prototype=new y,C.prototype.tokenType="{",T.prototype=new y,T.prototype.tokenType="}",E.prototype=new y,E.prototype.tokenType="[",N.prototype=new y,N.prototype.tokenType="]",A.prototype=new y,A.prototype.tokenType="(",I.prototype=new y,I.prototype.tokenType=")",R.prototype=new y,R.prototype.tokenType="EOF",U.prototype=new y,U.prototype.tokenType="DELIM",U.prototype.toString=function(){return"DELIM("+this.value+")"},U.prototype.toSourceString=function(){return this.value},D.prototype=new y,D.prototype.append=function(t){if(t instanceof Array)for(var e=0;e<t.length;e++)this.value.push(t[e]);else this.value.push(t);return!0},D.prototype.finish=function(){return this.value=this.valueAsString(),this},D.prototype.ASCIImatch=function(t){return this.valueAsString().toLowerCase()==t.toLowerCase()},D.prototype.valueAsString=function(){return"string"==typeof this.value?this.value:l(this.value)},D.prototype.valueAsCodes=function(){if("string"==typeof this.value){for(var t=[],e=0;e<this.value.length;e++)t.push(this.value.charCodeAt(e));return t}return this.value.filter(function(t){return t})},O.prototype=new D,O.prototype.tokenType="IDENT",O.prototype.toString=function(){return"IDENT("+this.value+")"},O.prototype.toSourceString=function(){return this.value},G.prototype=new D,G.prototype.tokenType="FUNCTION",G.prototype.toString=function(){return"FUNCTION("+this.value+")"},G.prototype.toSourceString=function(){return this.value},q.prototype=new D,q.prototype.tokenType="AT-KEYWORD",q.prototype.toString=function(){return"AT("+this.value+")"},q.prototype.toSourceString=function(){return"@"+this.value},M.prototype=new D,M.prototype.tokenType="HASH",M.prototype.toString=function(){return"HASH("+this.value+")"},M.prototype.toSourceString=function(){return"#"+this.value},L.prototype=new D,L.prototype.tokenType="STRING",L.prototype.toString=function(){return'"'+this.value+'"'},L.prototype.toSourceString=L.prototype.toString,H.prototype=new D,H.prototype.tokenType="URL",H.prototype.toString=function(){return"URL("+this.value+")"},H.prototype.toSourceString=function(){return"url('"+this.value+"')"},_.prototype=new D,_.prototype.tokenType="NUMBER",_.prototype.toString=function(){return"integer"==this.type?"INT("+this.value+")":"NUMBER("+this.value+")"},_.prototype.toSourceString=function(){return"integer"==this.type?this.value:this.value},_.prototype.finish=function(){return this.repr=this.valueAsString(),this.value=1*this.repr,Math.abs(this.value)%1!=0&&(this.type="number"),this},x.prototype=new y,x.prototype.tokenType="PERCENTAGE",x.prototype.toString=function(){return"PERCENTAGE("+this.value+")"},x.prototype.toSourceString=function(){return this.value+"%"},F.prototype=new y,F.prototype.tokenType="DIMENSION",F.prototype.toString=function(){return"DIM("+this.num+","+this.unit+")"},F.prototype.toSourceString=function(){return this.num+this.unit},F.prototype.append=function(t){if(t instanceof Array)for(var e=0;e<t.length;e++)this.unit.push(t[e]);else this.unit.push(t);return!0},F.prototype.finish=function(){return this.unit=l(this.unit),this.repr+=this.unit,this},P.prototype=new y,P.prototype.tokenType="UNICODE-RANGE",P.prototype.toString=function(){return this.start+1==this.end?"UNICODE-RANGE("+this.start.toString(16).toUpperCase()+")":this.start<this.end?"UNICODE-RANGE("+this.start.toString(16).toUpperCase()+"-"+this.end.toString(16).toUpperCase()+")":"UNICODE-RANGE()"},P.prototype.toSourceString=function(){return this.start+1==this.end?"UNICODE-RANGE("+this.start.toString(16).toUpperCase()+")":this.start<this.end?"UNICODE-RANGE("+this.start.toString(16).toUpperCase()+"-"+this.end.toString(16).toUpperCase()+")":"UNICODE-RANGE()"},P.prototype.contains=function(t){return t>=this.start&&t<this.end},t.tokenize=h});